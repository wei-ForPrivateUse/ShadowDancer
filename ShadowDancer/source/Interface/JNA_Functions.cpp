//
//  JNA_Functions.cpp
//
//  Created on: Dec 18, 2014
//      Author: wei
//

#include "JNA_Functions.h"

double e1(double w[]);
double e2(double w[]);
double e3(double w[]);

///------------- JNA interface function -----------------///
double evaluateFcns(double individual[], int func_index) {
	double fitness = 0.0;
	switch(func_index)
	{
	case 1:
		fitness = e1(individual);
		break;
	case 2:
		fitness = e2(individual);
		break;
	case 3:
		fitness = e3(individual);
		break;
	default:
		break;
	}
	return fitness;
}
///------------------------------------------------------///


double e1(double w[]) {
	ANNWeights* arbi = new ANNWeights({6, 10, 3}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w1 = new ANNWeights({19, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w2 = new ANNWeights({14, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w3 = new ANNWeights({11, 20, 2}, {false, true, false}, {false, true, true}, true);

	w1->Set(w);

	arbi->Randomize();
	w2->Randomize();
	w3->Randomize();

	double fitness = 0.0;
	for(int i = 0; i < 2; i++) {
		b2Vec2 gravity;
		gravity.Set(0.0f, 0.0f);
		b2World* world = new b2World(gravity);
		J1_S_Field::Configuration fc;
		fc.MaxStep = 12000;
		fc.World = world;
		fc.TrainingMode = 1;
		J1_M_M1 monitor;

		assa2d::SceneMgr* scenemgr = new J1_S_Field(&fc, arbi, w1, w2, w3);
		scenemgr->Run(&monitor);

		delete scenemgr;
		delete world;

		fitness += monitor.GetFitness();
	}
	fitness /= 2.0f;

	delete arbi;
	delete w1;
	delete w2;
	delete w3;

	return fitness;
}

double e2(double w[]) {
	ANNWeights* arbi = new ANNWeights({6, 10, 3}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w1 = new ANNWeights({19, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w2 = new ANNWeights({14, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w3 = new ANNWeights({11, 20, 2}, {false, true, false}, {false, true, true}, true);

	double w1_c[] = {-0.47010216520221915, -0.45936241275706946, -0.519321184640162, -0.3091422302071714, 0.7028055111725567, -0.2672360960292496, -0.6588323556945519, 0.6159027589085851, -0.6850207953796262, -0.27025987874267116, -0.3089394669681587, -0.36114463879651104, 0.6433483341380167, 0.2781103593178248, -0.9251126992656903, -0.554746401090237, -0.3492177278094736, -0.022797041591790038, 0.9456739169664135, -0.7126612008609154, -0.10762210048146462, -0.16212542760731952, 0.5279815924588004, 0.6171027010610717, -0.035964333152484596, -0.34996880579874706, -0.48662822247549087, 0.06831156503167045, -0.7489007795734384, -0.5512175043458521, -0.04733778501979179, -0.33808877375442636, 0.8118518836349169, 0.8232801530068031, -0.22052381747987876, 0.16679826816157603, -0.23679976925342777, 0.3729355800159691, 0.7133839237648589, -0.19335831164356382, -0.35255972416790426, 0.03447201823397404, 0.3575173554580111, 0.09108979405161152, 0.26408901284670416, -0.5615967975910953, -0.17830062305266653, -0.3741352700386306, -0.12373383596281169, 0.17558674909820077, 0.17720163997624278, -0.8629085126019832, -0.03629790898799279, 0.2825273176925515, -0.5733255539233565, -0.6435215827139903, 0.5971073367469821, -0.06800041309471212, 0.3707930590931144, 0.5979218776500053, 0.053510076900759616, 0.19587668613231618, -0.15539321400220332, 0.42583439441695853, 0.18755233197810642, 0.6513845190102456, 0.4206397707912404, 0.02082720765335188, 0.4210804484704287, -0.11957182801551669, -0.03976891354832139, 0.14130402563114927, 0.11239371232398664, 0.5386535183637349, 0.4169301126835787, 0.23449379563673303, 0.009258148251947693, 0.24423573198296594, -0.043373068088453676, 0.056605584278712484, -0.25076631240502234, 0.07785569531236596, 0.1715859023326456, -0.028225500412217372, -0.4139781833443201, -0.35144532892462926, -0.5695458888056144, -0.689464826720624, 0.4170436598416667, 0.3703271108029295, -0.14028110945155045, 0.3444597196524999, -0.5030690746242801, -0.5078003844303428, 0.2031163278102157, -0.04648588833563229, -0.36379679341337173, 0.19855596464767636, -0.40127974136248834, 0.3829159758422617, 0.7844361467050552, -0.11072167205906483, -0.06172204868798985, -0.477374455737903, -0.4941373424610013, 0.547460373047626, -0.08717555152455818, -0.288632179909095, -0.4055673314463155, 0.5585519915726237, -0.8098821325083924, 0.6132956122811088, -0.6974692371462091, -0.2977173688477479, 0.11226205236146218, 0.5900126337606201, -0.3188542401053832, 0.5380264141367193, -0.34289580557680355, 0.06642470120444942, 0.1303111910795419, -0.58183232825278, 0.06715978312085813, -0.5850149122661737, 0.0629376796994938, 0.15313128604790568, -0.182813094381294, -0.013508671490605773, 0.2890342916363333, 0.08218590034493405, 0.47031308469714683, -0.6047667474315881, 0.5357294620259687, 0.11420819380850868, -0.17073431114040452, 0.2368325444629235, -0.22961518022530547, -0.12877208945025204, 0.08380278095061193, 0.12066128851252221, 0.3758517048453368, -0.5303435533048859, -0.6311618892578257, 0.6091619745563225, -0.6852684320986147, -0.27678412097050376, -0.20863841128194616, -0.5684605331134703, -0.6034613625530401, -0.3423095006425151, -0.8588357454215233, -0.8005673732812701, 0.6982612747358851, 0.38762313248138985, -0.5069776330047172, 0.5630580739359551, 0.0981228531276198, 0.4500981086969261, 0.47802172859402503, -0.603564522513732, 0.22105436201133566, -0.4600698627436679, -0.3783491130963016, 0.172946133803282, -0.6488282192817654, 0.4445814374799185, 0.23733242960039275, -0.2616325507651868, 0.1722232685128971, -0.00152530863387337, 0.5508156839180033, -0.40346857633606703, -0.451205219441784, -0.2957924197444066, -0.8919219997543493, -0.28564123687427606, 0.12636175770546895, 0.20741601368255175, 0.07286750959543098, -0.16770220153474488, -0.4325674637167915, 0.5982850949012182, -0.21127774171510716, -0.667140736683717, 0.5396203843245252, -0.5823191875695914, 0.691918369502853, 0.3573380282803094, -0.2695237644465295, 0.6416523558409546, -0.5846755034651487, 0.41943704681908056, -0.4546726853716131, -0.548198282991504, 0.6465241978425919, 0.11722568263875888, 0.2059840353526189, 0.17820646424535475, -0.47108428475266817, 0.7076915862363455, 0.3221132952084837, -0.4597588060808415, -0.43931441579806624, -0.6521670978098464, -0.6431196832588152, 0.1717031549076476, -0.34597082407609586, -0.7060068933511321, 0.11145030208522871, 0.533652312631578, 0.5887943009895985, 0.7457275385467871, -0.4347937049326793, -0.5330895296879604, 0.7409884088008395, -0.6814142910068738, -0.38581590238354535, 0.6916485169524862, -0.8590640432667753, 0.12707364090609286, 0.5264042108079455, 0.19214600879099153, -0.6609690077761327, -0.1821017966405635, -0.6579117827500061, 0.3958726455873128, -0.20528244467816772, 0.3040543526366576, -0.5968150168542571, 0.04651941746201803, -0.04998310855560745, 0.34752426976263406, 0.432733427456142, -0.08567141372629566, 0.6352100113269835, 0.7817476195249814, -0.4435637743571509, -0.16786974925884113, 0.22431313457830732, -0.46923386765668074, 0.41271228251176084, 0.378221476289296, 0.6764735452622748, -0.3155355025544132, 0.5880432271509539, -0.04427749262712392, 0.09879059269025084, 0.31961919996988675, 0.6258942431879811, 0.06657494914658643, -0.4372037266281272, -0.016968429696066697, -0.43322028848911776, 0.0071430132946106, 0.08691718348967395, -0.5473758671164193, 0.38794378980756383, 0.5245287421812126, 0.46419291504020105, 0.09401050921237228, -0.46767596866865446, -0.48634659075652714, -0.370896979778234, -0.45079348140308556, -0.02636785815469147, 0.22039334185248965, 0.1413318175711907, -0.39446363035795007, 0.644133544690935, 0.5919577123971149, 0.8785674293143023, 0.6649393925148055, -0.5886522713443954, 0.5674153608458502, 0.11918729103658884, -0.38927385875749715, 0.9011879357169759, 0.31889489481859923, -0.3850566485311529, 0.471327849273238, 0.25651966887039307, 0.10535916520302548, -0.026685276916183207, 0.036600997584470815, -0.1064194927517965, 0.14511479908124203, -0.010538896232029048, -0.5858502180175595, 0.2555410864017418, 0.014099290424535628, -8.391731935110461E-4, 0.45022206976619317, -0.2015703051678103, -0.25118021903304283, 0.4483263360540345, 0.27676312080160825, -0.5905262222462611, -0.707484948332234, -0.9317447022653464, 0.057085413846923075, 0.3933519792074135, 0.45731511896804933, -0.21805075847438168, -0.3535201611729041, 0.6812763407851689, 0.42181472542014997, 0.442394538675134, 0.39497597175358684, -0.2201946169082924, 0.15546629598320771, 0.6086626691824832, -0.11458164228577263, -0.2735576581223116, -0.2507023092276702, -0.23140544411593697, -0.43024627513760816, -0.3506536535298327, -0.11042681850158001, 0.6321095542202396, 0.8536017217157185, -0.6890169080944211, -0.8142324820863319, -0.6617584666496771, -0.45150319782135373, -0.47814432875698487, -0.43913933963564106, 0.059501292185233076, -0.25426627866877005, 0.25639111585782315, -0.1677715497840534, 0.6138541494157677, 0.13034963874995908, -0.2717427933575137, 0.031551293608978966, -0.2865033956143073, -0.5059123590706205, 0.0613686991987461, -0.3132258391718576, 0.027302298003445635, 0.16912215004628128, -0.10887541631912442, 0.4978804011649584, 0.5340635146960371, 0.2486389147912535, -0.38500468148971834, -0.6116018369240227, -0.4504254614912177, 0.7170092720974202, -0.6558894530321612, -0.5534236774511638, -0.7528761921342396, -0.41458256909678376, 0.22201964192695423, -0.532952349846521, 0.17777962847913764, 0.672261078138556, -0.49417415423659294, -0.46252779286464396, 0.17235270176190864, 0.3951358879955795, 0.49910250226090835, 0.6849159710847118, -0.32681454305980207, 0.3057407877181211, 0.5504069377211548, -0.4276777558926123, 0.17024591756663948, 0.32471449722662754, 0.7788971008798075, 0.10902263502419059, 0.2589535011598272, 0.37069121555418005, -0.04081993157161842, 0.2174132125361275, 0.01823487554742114, 0.5691487153872623, -0.30931001464420793, -0.09348025060541307, -0.11929028980333514, 0.3718947141601639, 0.7630537929759715, 0.4869952992910397, -0.8492530582596032, -0.6328265654977239, -0.6141210285786981, 0.22721701478935202, 0.3152781722372795, -0.05253472604690734, -0.8229391245890167, -0.12395167175310434, 0.8221962927656851, 0.047053235026572354, -0.6340120854731561, -0.6780035375009189, -0.7196461555175204, 0.14241849096522674, -0.3683786945770667, -0.41302594763945955, 0.14779884515422087, -0.4910342619854574, 0.4439182566749355, -0.20234925319702282, 0.4571876115745448, -0.023906518377770886, 0.3448941687914938, 0.5891636907727312, 0.32057964360088675, 0.6849665710641404, -0.6330939967136539, -0.542520641047012, 0.021993541874676514, 0.5310695805511234, -0.375965444327447, 0.05341215651662866, 0.8916409223293553, -0.2225706511040934, -0.23121165779775926, 0.6778738883903672, -0.5226480866229065, -0.7135270082253063, -0.19361035876574625, 0.388537884795629, -0.6496456361142121, -0.4710710397579146, 0.07445392117405902, -0.6704938925828133, 0.1826247975858064, 0.49431255494213444, 0.0722280720472912, -0.25034368583419625, 0.4468281949027858, 0.11500975076494371, -0.1879483575264152, -0.3066692921504833, 0.056127477131950175, -0.20043864215225413, 0.1957736866420725, -0.07170724552202179, 0.11307961504117595, -0.04243421184299234, 0.1490890445615937, 0.1067546519671178, 0.5721863708899645, -0.31103217173850695, 0.5128406475641142, -0.33956427174208337, 0.4016540320217932, 0.7315421634689018, 0.03454442033098153, 0.5142760719737038, -0.44835729112459005, -0.29848489847907983, -0.4155392704074688, -0.46817776485375784, -0.19032712851304281, -0.45010959018526964, 0.6644252688599411, -0.3776676622146605, 0.21176885788405708, -0.27306856971434595, -0.3866839548412399, -0.0321181530714181, 0.5914909766474395, 0.22477293600702788, 0.39938475011136215, -0.756571510210275, 0.0615199993622418, -0.018222729351231898, 0.5723269264527708, -0.5537376393143062, -0.249174125296586, -0.38290768885214144, -0.03526858539126747, -0.06317697860583238, 0.67882767578578, 0.3301263845419638, 0.8592634561854504, 0.09918749695876439, -0.35469436591642495, 0.3833524983418053, -0.4101774267783851, -0.019475194103937766, 0.5617327346537981, 0.4487127482534489, 0.2989703183187214, -0.3157251506345307, -0.022506636142308648, 0.34190230339271854, -0.013044834075717888, -0.4516533882154424, 0.09294214929980005, 0.022019132843947176, -0.2953474655556736, 0.43034931747098304, -0.2545695235430254, 0.14779067410932206, 0.1369307264654688, -0.0683373870861102, 0.2557457096255017, -0.2960080365070499, -0.4172463256525485, -0.281193188126529, -0.06480119115920771, -0.2556313054117271, -0.46519884933290934, 0.3587477424218722, -0.23137644610787184, 0.35070834575752324, 0.13098995424120302, -0.5395380396177605, -0.25093504118440163, 0.24940851685513502, -0.3233591021703609, -0.24693627843056865, -0.7979482935686204, -0.06674429774812529, 0.5025598192848937, -0.020238075650874474, -0.07318679433401593, 0.21522451868055978, -0.3330771978207938, 0.36763701339685373, -0.3245374638983863, 0.03452721128546067, -0.38756484191755414, 3.1336415555076325E-4, -0.7652801201852472, -0.46320318737570587, 0.19175663108020063, -0.4457474870491969, 0.3074072381404661, -0.31400745951870385, -0.5016703658482389, 0.02370443657995877, 0.566346049548214, -0.381491160712183, -0.483667051117164, 0.4786897764131678, -0.5567796365755314, -0.4003805632885592, -0.43714783310721494, 0.2900938012053273, 0.20767181972741425, -0.11067821024742946, -0.677176519233495, -0.2899568288094804, -0.5228589874830112, -0.13154717447368539, 0.5522754372940731, 0.21521479096504645, -0.057458971540725184, -0.10008363939095105, -0.24575823972113367, -0.4013527997704811, 0.1736482963484245, 0.03589047188269534, 0.46370907148228274, -0.6360767593130259, 0.23668162451917252, -0.3760481843273341, 0.3495400937304429, 0.5520234694491085, 0.6172560912075598, 0.7132684290884395, 0.3112687141101686, -0.04413031327323225, -0.38956876359422754, 0.16259382330697186, 0.015395582383803785, -0.6980934744538636, -0.42197753078328726, 0.23558215051863224, 0.04042908957491839, -0.03708643013931803, -0.06915217806903375, -0.33892019085107045, 0.43524816596018334, -0.461674700146707, 0.7012559945326886, -0.25086139399547075, -0.2476523185009769, 0.21467258475548845, -0.07966365491093554, -0.7401970091704824, -0.23462248926153154, -0.1800087561098785, 0.2936999022505854, -0.17292863739996853, 0.22387407399287113, 0.2749154086044623, -0.37728232716702303, 0.352456501862617, -0.7050166571653163, -0.5985123592466465, 0.40224392971294337, -0.5419587800653867, 0.49470492079054984, -0.3366655650490349, -0.38578480037492835, 0.6997597745475824, 0.5050201766258894, 0.38660643495678987, -0.5204316872661207, -0.25454408293721864, -0.1569144648156161, -0.18902567197743525, 0.3423773947477391, -0.6158802477031817, -0.208944446795609, -0.016334716360260588, 0.2437106918038342, 0.01913317996747665, -0.24297670604746635, -0.694958887674106, 0.2600829866764762, -0.07117284282847461, -0.03526647099650184, 0.11305351143064979, 0.1851332146279745, 0.5902425171872534, -0.023864742930085295, -0.10966293523158777, -0.7413642513703197, 0.1726645058678782, -0.003211831844646587, 0.579907833778884, -0.24185185445437518, -0.48354670806711475, 0.18353359201057967, 0.0037750101967253535, 0.23180534933066327, -0.13523405652663825, -0.036767060455934426, -0.5815400138352537, 0.1909351812998723, -0.3105343394448058, -0.3519920407439984, 0.3673593622173681, -0.2641945660537657, 0.23841831763186003, -0.5182116698693794, 0.1326448625788825, 0.2857480029418348, 0.125119145921431, -0.7487688981207777, 0.24121863616506437, 0.39362207536009536, 0.22607602996113754, 0.29732453854164664, 0.28031215935413334, 0.6509311839598205, 0.15432302141754387, 0.537891382833765, -0.3044047976603572, 0.728942131394101, 0.1451814173985138, 0.17741263611250377, -0.5576678633089605, -0.4128184124034386, 0.3468415772681399, 0.18161713145408306, 0.6173803328337368, 0.0929430174510801, 0.36156280160662796, 0.08126933192461307, 0.10078139725333818, -0.5749660352693519, 0.7300460850799658, -0.3696330928265789, -0.28375734313709805, -0.005488983403658665, -0.5495421619074458, 0.09956086698711622, 0.306565507861824, -0.06358156834499956, -0.3097205163312864, 0.3853153414838036, -0.25220424711916783, 0.25262265610160395, -0.11565510796620397, -0.2932292753092772, 0.27392841990234773, -0.31272327719814874, 0.6791868582759754, -0.6259885011039997, 0.12492727083874233, -0.4017551798601904, -0.09978981401786423, -0.7211510270951726, -0.29826012858170226, -0.546244846901986, -0.28843857517172267, 0.5257959511394519, 0.10627595008092988, -0.7136393673940271, -0.1779784590917789, -0.8549077172012629, -0.29568108878466653, 0.40252698159563566, 0.34998356875110265, 0.5623440347399893, -0.4896922539646597, -0.2667614854131255, -0.2904546763795601, -0.5000966818898153, 0.017609326624424312, 0.8331627572246835, -0.8566931406341838, 0.5239195039575307, 0.03329744240044398, 0.8231169582488091, 0.34848949854000827, -0.3095232285005586, -0.18210382724913798, 0.46815572755050117, 0.1122642319314201, -0.23006064120863992, -0.011836899876285556, -0.6772948049610555, -0.6316109362514866, -0.19402684609754184, 0.2793081414026216, 0.5295197937397984, 0.003268352865405319, 0.5473386325932234, 0.562738435812155, -0.03070550109562971, 0.33806837556391, 0.5503980591134094, -0.4975369592952644, -0.350938994545103, 0.20797844264543636, -0.4901403027964975, -0.0952946920040085, -0.2888462455397484, -0.18109038337788352, 0.6304035275269971, -0.32435177788897374, -0.21725805157631123, -0.699696444192714, -0.23479073249570828, -4.956251645411441E-4, -0.22640621323834892, 0.7129147274238178, 0.6228292028654474, 0.151072525005402, -0.6430543102488941, -0.24629636859702553, 0.09332852600348543, -0.384314518332656, -0.4965440824798653, -0.7415357827458968, 0.006145807686822132, -0.2464309545911577, 0.054115220138742495, 0.02624570117415516, 0.20432360458901863, 0.2259725625411617, 0.04524025140538803, -0.03652881414270774, -0.47302886100371816, -0.3231835071237325, 0.08165485634541965, 0.5131881764947565, -0.14021908369070962, -0.30525739232927207, -0.36178549609080146, -0.06508199189379912, 0.12636657838165613, -0.6699800711072109, 0.40196415361993926, 0.5112509994396114, 0.5089025443596521, -0.34217138708011446, -0.0036555601048735287, -0.5206169568944562, -0.014884945826568269, 0.4136482479944762, 0.18767594170497753, -0.029069624540351724, -0.6843110648993802, -0.28846251463521033, -0.365910289961984, 0.3662874097368828, 0.13825921137060346, -0.16783391177566076, 0.3481529910365899, -0.1603181820336287, -0.33894547526451385, -0.5621053643773398, -0.1730286599233387, -0.4752289686512734, 0.24964466160574036, 0.10418348925889562, -0.5204913943752187, -0.05302447999028729, 0.5287350752220341, -0.28974123122999285, 0.08120744265942838, -0.038299658063144434, -0.2949259168744006, 0.016787690491731552, -0.23647431509158526, 0.26296357346551946, -0.3033855666038721, 0.1970272316994643, 0.5030879772516667, -0.22494107873387464, -0.13061459112547535, 0.1808077273370409, -0.5028504476919688, -0.3513849985038997, -0.10661986873344531, 0.23325842210492326, -0.5387140283687007, 0.6993353691039631, -0.4641891251888303, 0.003313655864287446, -0.27455844697977483, 0.2962884745722103, 0.09809342454044383, -0.310571408986949, -0.2717796426766618, 0.041775033483852156, 0.030294307223837316, 0.05922322148360274, 0.1651063268571575, -0.18627595963967358, -0.3703925012765447, -0.24002091237353784, -0.10571046217818622, -0.10024602695436083, 0.17312522875677472, 0.0665114145424574, -0.1973079406364588, 0.011767940701108984, 0.07248384164080533, 0.3374842341405634, 0.1910874641428756, -0.15822771999652024, -0.3538131961370415, -0.09632128907006399};

	w1->Set(w1_c);
	w2->Set(w);

	arbi->Randomize();
	w3->Randomize();

	double fitness = 0.0;
	for(int i = 0; i < 2; i++) {
		b2Vec2 gravity;
		gravity.Set(0.0f, 0.0f);
		b2World* world = new b2World(gravity);
		J1_S_Field::Configuration fc;
		fc.MaxStep = 12000;
		fc.World = world;
		fc.TrainingMode = 2;
		J1_M_M2 monitor;

		assa2d::SceneMgr* scenemgr = new J1_S_Field(&fc, arbi, w1, w2, w3);
		scenemgr->Run(&monitor);

		delete scenemgr;
		delete world;

		fitness += monitor.GetFitness();
	}
	fitness /= 2.0f;

	delete arbi;
	delete w1;
	delete w2;
	delete w3;

	return fitness;
}

double e3(double w[]) {
	ANNWeights* arbi = new ANNWeights({6, 10, 3}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w1 = new ANNWeights({19, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w2 = new ANNWeights({14, 20, 2}, {false, true, false}, {false, true, true}, true);
	ANNWeights* w3 = new ANNWeights({11, 20, 2}, {false, true, false}, {false, true, true}, true);

	double w1_c[] = {-0.47010216520221915, -0.45936241275706946, -0.519321184640162, -0.3091422302071714, 0.7028055111725567, -0.2672360960292496, -0.6588323556945519, 0.6159027589085851, -0.6850207953796262, -0.27025987874267116, -0.3089394669681587, -0.36114463879651104, 0.6433483341380167, 0.2781103593178248, -0.9251126992656903, -0.554746401090237, -0.3492177278094736, -0.022797041591790038, 0.9456739169664135, -0.7126612008609154, -0.10762210048146462, -0.16212542760731952, 0.5279815924588004, 0.6171027010610717, -0.035964333152484596, -0.34996880579874706, -0.48662822247549087, 0.06831156503167045, -0.7489007795734384, -0.5512175043458521, -0.04733778501979179, -0.33808877375442636, 0.8118518836349169, 0.8232801530068031, -0.22052381747987876, 0.16679826816157603, -0.23679976925342777, 0.3729355800159691, 0.7133839237648589, -0.19335831164356382, -0.35255972416790426, 0.03447201823397404, 0.3575173554580111, 0.09108979405161152, 0.26408901284670416, -0.5615967975910953, -0.17830062305266653, -0.3741352700386306, -0.12373383596281169, 0.17558674909820077, 0.17720163997624278, -0.8629085126019832, -0.03629790898799279, 0.2825273176925515, -0.5733255539233565, -0.6435215827139903, 0.5971073367469821, -0.06800041309471212, 0.3707930590931144, 0.5979218776500053, 0.053510076900759616, 0.19587668613231618, -0.15539321400220332, 0.42583439441695853, 0.18755233197810642, 0.6513845190102456, 0.4206397707912404, 0.02082720765335188, 0.4210804484704287, -0.11957182801551669, -0.03976891354832139, 0.14130402563114927, 0.11239371232398664, 0.5386535183637349, 0.4169301126835787, 0.23449379563673303, 0.009258148251947693, 0.24423573198296594, -0.043373068088453676, 0.056605584278712484, -0.25076631240502234, 0.07785569531236596, 0.1715859023326456, -0.028225500412217372, -0.4139781833443201, -0.35144532892462926, -0.5695458888056144, -0.689464826720624, 0.4170436598416667, 0.3703271108029295, -0.14028110945155045, 0.3444597196524999, -0.5030690746242801, -0.5078003844303428, 0.2031163278102157, -0.04648588833563229, -0.36379679341337173, 0.19855596464767636, -0.40127974136248834, 0.3829159758422617, 0.7844361467050552, -0.11072167205906483, -0.06172204868798985, -0.477374455737903, -0.4941373424610013, 0.547460373047626, -0.08717555152455818, -0.288632179909095, -0.4055673314463155, 0.5585519915726237, -0.8098821325083924, 0.6132956122811088, -0.6974692371462091, -0.2977173688477479, 0.11226205236146218, 0.5900126337606201, -0.3188542401053832, 0.5380264141367193, -0.34289580557680355, 0.06642470120444942, 0.1303111910795419, -0.58183232825278, 0.06715978312085813, -0.5850149122661737, 0.0629376796994938, 0.15313128604790568, -0.182813094381294, -0.013508671490605773, 0.2890342916363333, 0.08218590034493405, 0.47031308469714683, -0.6047667474315881, 0.5357294620259687, 0.11420819380850868, -0.17073431114040452, 0.2368325444629235, -0.22961518022530547, -0.12877208945025204, 0.08380278095061193, 0.12066128851252221, 0.3758517048453368, -0.5303435533048859, -0.6311618892578257, 0.6091619745563225, -0.6852684320986147, -0.27678412097050376, -0.20863841128194616, -0.5684605331134703, -0.6034613625530401, -0.3423095006425151, -0.8588357454215233, -0.8005673732812701, 0.6982612747358851, 0.38762313248138985, -0.5069776330047172, 0.5630580739359551, 0.0981228531276198, 0.4500981086969261, 0.47802172859402503, -0.603564522513732, 0.22105436201133566, -0.4600698627436679, -0.3783491130963016, 0.172946133803282, -0.6488282192817654, 0.4445814374799185, 0.23733242960039275, -0.2616325507651868, 0.1722232685128971, -0.00152530863387337, 0.5508156839180033, -0.40346857633606703, -0.451205219441784, -0.2957924197444066, -0.8919219997543493, -0.28564123687427606, 0.12636175770546895, 0.20741601368255175, 0.07286750959543098, -0.16770220153474488, -0.4325674637167915, 0.5982850949012182, -0.21127774171510716, -0.667140736683717, 0.5396203843245252, -0.5823191875695914, 0.691918369502853, 0.3573380282803094, -0.2695237644465295, 0.6416523558409546, -0.5846755034651487, 0.41943704681908056, -0.4546726853716131, -0.548198282991504, 0.6465241978425919, 0.11722568263875888, 0.2059840353526189, 0.17820646424535475, -0.47108428475266817, 0.7076915862363455, 0.3221132952084837, -0.4597588060808415, -0.43931441579806624, -0.6521670978098464, -0.6431196832588152, 0.1717031549076476, -0.34597082407609586, -0.7060068933511321, 0.11145030208522871, 0.533652312631578, 0.5887943009895985, 0.7457275385467871, -0.4347937049326793, -0.5330895296879604, 0.7409884088008395, -0.6814142910068738, -0.38581590238354535, 0.6916485169524862, -0.8590640432667753, 0.12707364090609286, 0.5264042108079455, 0.19214600879099153, -0.6609690077761327, -0.1821017966405635, -0.6579117827500061, 0.3958726455873128, -0.20528244467816772, 0.3040543526366576, -0.5968150168542571, 0.04651941746201803, -0.04998310855560745, 0.34752426976263406, 0.432733427456142, -0.08567141372629566, 0.6352100113269835, 0.7817476195249814, -0.4435637743571509, -0.16786974925884113, 0.22431313457830732, -0.46923386765668074, 0.41271228251176084, 0.378221476289296, 0.6764735452622748, -0.3155355025544132, 0.5880432271509539, -0.04427749262712392, 0.09879059269025084, 0.31961919996988675, 0.6258942431879811, 0.06657494914658643, -0.4372037266281272, -0.016968429696066697, -0.43322028848911776, 0.0071430132946106, 0.08691718348967395, -0.5473758671164193, 0.38794378980756383, 0.5245287421812126, 0.46419291504020105, 0.09401050921237228, -0.46767596866865446, -0.48634659075652714, -0.370896979778234, -0.45079348140308556, -0.02636785815469147, 0.22039334185248965, 0.1413318175711907, -0.39446363035795007, 0.644133544690935, 0.5919577123971149, 0.8785674293143023, 0.6649393925148055, -0.5886522713443954, 0.5674153608458502, 0.11918729103658884, -0.38927385875749715, 0.9011879357169759, 0.31889489481859923, -0.3850566485311529, 0.471327849273238, 0.25651966887039307, 0.10535916520302548, -0.026685276916183207, 0.036600997584470815, -0.1064194927517965, 0.14511479908124203, -0.010538896232029048, -0.5858502180175595, 0.2555410864017418, 0.014099290424535628, -8.391731935110461E-4, 0.45022206976619317, -0.2015703051678103, -0.25118021903304283, 0.4483263360540345, 0.27676312080160825, -0.5905262222462611, -0.707484948332234, -0.9317447022653464, 0.057085413846923075, 0.3933519792074135, 0.45731511896804933, -0.21805075847438168, -0.3535201611729041, 0.6812763407851689, 0.42181472542014997, 0.442394538675134, 0.39497597175358684, -0.2201946169082924, 0.15546629598320771, 0.6086626691824832, -0.11458164228577263, -0.2735576581223116, -0.2507023092276702, -0.23140544411593697, -0.43024627513760816, -0.3506536535298327, -0.11042681850158001, 0.6321095542202396, 0.8536017217157185, -0.6890169080944211, -0.8142324820863319, -0.6617584666496771, -0.45150319782135373, -0.47814432875698487, -0.43913933963564106, 0.059501292185233076, -0.25426627866877005, 0.25639111585782315, -0.1677715497840534, 0.6138541494157677, 0.13034963874995908, -0.2717427933575137, 0.031551293608978966, -0.2865033956143073, -0.5059123590706205, 0.0613686991987461, -0.3132258391718576, 0.027302298003445635, 0.16912215004628128, -0.10887541631912442, 0.4978804011649584, 0.5340635146960371, 0.2486389147912535, -0.38500468148971834, -0.6116018369240227, -0.4504254614912177, 0.7170092720974202, -0.6558894530321612, -0.5534236774511638, -0.7528761921342396, -0.41458256909678376, 0.22201964192695423, -0.532952349846521, 0.17777962847913764, 0.672261078138556, -0.49417415423659294, -0.46252779286464396, 0.17235270176190864, 0.3951358879955795, 0.49910250226090835, 0.6849159710847118, -0.32681454305980207, 0.3057407877181211, 0.5504069377211548, -0.4276777558926123, 0.17024591756663948, 0.32471449722662754, 0.7788971008798075, 0.10902263502419059, 0.2589535011598272, 0.37069121555418005, -0.04081993157161842, 0.2174132125361275, 0.01823487554742114, 0.5691487153872623, -0.30931001464420793, -0.09348025060541307, -0.11929028980333514, 0.3718947141601639, 0.7630537929759715, 0.4869952992910397, -0.8492530582596032, -0.6328265654977239, -0.6141210285786981, 0.22721701478935202, 0.3152781722372795, -0.05253472604690734, -0.8229391245890167, -0.12395167175310434, 0.8221962927656851, 0.047053235026572354, -0.6340120854731561, -0.6780035375009189, -0.7196461555175204, 0.14241849096522674, -0.3683786945770667, -0.41302594763945955, 0.14779884515422087, -0.4910342619854574, 0.4439182566749355, -0.20234925319702282, 0.4571876115745448, -0.023906518377770886, 0.3448941687914938, 0.5891636907727312, 0.32057964360088675, 0.6849665710641404, -0.6330939967136539, -0.542520641047012, 0.021993541874676514, 0.5310695805511234, -0.375965444327447, 0.05341215651662866, 0.8916409223293553, -0.2225706511040934, -0.23121165779775926, 0.6778738883903672, -0.5226480866229065, -0.7135270082253063, -0.19361035876574625, 0.388537884795629, -0.6496456361142121, -0.4710710397579146, 0.07445392117405902, -0.6704938925828133, 0.1826247975858064, 0.49431255494213444, 0.0722280720472912, -0.25034368583419625, 0.4468281949027858, 0.11500975076494371, -0.1879483575264152, -0.3066692921504833, 0.056127477131950175, -0.20043864215225413, 0.1957736866420725, -0.07170724552202179, 0.11307961504117595, -0.04243421184299234, 0.1490890445615937, 0.1067546519671178, 0.5721863708899645, -0.31103217173850695, 0.5128406475641142, -0.33956427174208337, 0.4016540320217932, 0.7315421634689018, 0.03454442033098153, 0.5142760719737038, -0.44835729112459005, -0.29848489847907983, -0.4155392704074688, -0.46817776485375784, -0.19032712851304281, -0.45010959018526964, 0.6644252688599411, -0.3776676622146605, 0.21176885788405708, -0.27306856971434595, -0.3866839548412399, -0.0321181530714181, 0.5914909766474395, 0.22477293600702788, 0.39938475011136215, -0.756571510210275, 0.0615199993622418, -0.018222729351231898, 0.5723269264527708, -0.5537376393143062, -0.249174125296586, -0.38290768885214144, -0.03526858539126747, -0.06317697860583238, 0.67882767578578, 0.3301263845419638, 0.8592634561854504, 0.09918749695876439, -0.35469436591642495, 0.3833524983418053, -0.4101774267783851, -0.019475194103937766, 0.5617327346537981, 0.4487127482534489, 0.2989703183187214, -0.3157251506345307, -0.022506636142308648, 0.34190230339271854, -0.013044834075717888, -0.4516533882154424, 0.09294214929980005, 0.022019132843947176, -0.2953474655556736, 0.43034931747098304, -0.2545695235430254, 0.14779067410932206, 0.1369307264654688, -0.0683373870861102, 0.2557457096255017, -0.2960080365070499, -0.4172463256525485, -0.281193188126529, -0.06480119115920771, -0.2556313054117271, -0.46519884933290934, 0.3587477424218722, -0.23137644610787184, 0.35070834575752324, 0.13098995424120302, -0.5395380396177605, -0.25093504118440163, 0.24940851685513502, -0.3233591021703609, -0.24693627843056865, -0.7979482935686204, -0.06674429774812529, 0.5025598192848937, -0.020238075650874474, -0.07318679433401593, 0.21522451868055978, -0.3330771978207938, 0.36763701339685373, -0.3245374638983863, 0.03452721128546067, -0.38756484191755414, 3.1336415555076325E-4, -0.7652801201852472, -0.46320318737570587, 0.19175663108020063, -0.4457474870491969, 0.3074072381404661, -0.31400745951870385, -0.5016703658482389, 0.02370443657995877, 0.566346049548214, -0.381491160712183, -0.483667051117164, 0.4786897764131678, -0.5567796365755314, -0.4003805632885592, -0.43714783310721494, 0.2900938012053273, 0.20767181972741425, -0.11067821024742946, -0.677176519233495, -0.2899568288094804, -0.5228589874830112, -0.13154717447368539, 0.5522754372940731, 0.21521479096504645, -0.057458971540725184, -0.10008363939095105, -0.24575823972113367, -0.4013527997704811, 0.1736482963484245, 0.03589047188269534, 0.46370907148228274, -0.6360767593130259, 0.23668162451917252, -0.3760481843273341, 0.3495400937304429, 0.5520234694491085, 0.6172560912075598, 0.7132684290884395, 0.3112687141101686, -0.04413031327323225, -0.38956876359422754, 0.16259382330697186, 0.015395582383803785, -0.6980934744538636, -0.42197753078328726, 0.23558215051863224, 0.04042908957491839, -0.03708643013931803, -0.06915217806903375, -0.33892019085107045, 0.43524816596018334, -0.461674700146707, 0.7012559945326886, -0.25086139399547075, -0.2476523185009769, 0.21467258475548845, -0.07966365491093554, -0.7401970091704824, -0.23462248926153154, -0.1800087561098785, 0.2936999022505854, -0.17292863739996853, 0.22387407399287113, 0.2749154086044623, -0.37728232716702303, 0.352456501862617, -0.7050166571653163, -0.5985123592466465, 0.40224392971294337, -0.5419587800653867, 0.49470492079054984, -0.3366655650490349, -0.38578480037492835, 0.6997597745475824, 0.5050201766258894, 0.38660643495678987, -0.5204316872661207, -0.25454408293721864, -0.1569144648156161, -0.18902567197743525, 0.3423773947477391, -0.6158802477031817, -0.208944446795609, -0.016334716360260588, 0.2437106918038342, 0.01913317996747665, -0.24297670604746635, -0.694958887674106, 0.2600829866764762, -0.07117284282847461, -0.03526647099650184, 0.11305351143064979, 0.1851332146279745, 0.5902425171872534, -0.023864742930085295, -0.10966293523158777, -0.7413642513703197, 0.1726645058678782, -0.003211831844646587, 0.579907833778884, -0.24185185445437518, -0.48354670806711475, 0.18353359201057967, 0.0037750101967253535, 0.23180534933066327, -0.13523405652663825, -0.036767060455934426, -0.5815400138352537, 0.1909351812998723, -0.3105343394448058, -0.3519920407439984, 0.3673593622173681, -0.2641945660537657, 0.23841831763186003, -0.5182116698693794, 0.1326448625788825, 0.2857480029418348, 0.125119145921431, -0.7487688981207777, 0.24121863616506437, 0.39362207536009536, 0.22607602996113754, 0.29732453854164664, 0.28031215935413334, 0.6509311839598205, 0.15432302141754387, 0.537891382833765, -0.3044047976603572, 0.728942131394101, 0.1451814173985138, 0.17741263611250377, -0.5576678633089605, -0.4128184124034386, 0.3468415772681399, 0.18161713145408306, 0.6173803328337368, 0.0929430174510801, 0.36156280160662796, 0.08126933192461307, 0.10078139725333818, -0.5749660352693519, 0.7300460850799658, -0.3696330928265789, -0.28375734313709805, -0.005488983403658665, -0.5495421619074458, 0.09956086698711622, 0.306565507861824, -0.06358156834499956, -0.3097205163312864, 0.3853153414838036, -0.25220424711916783, 0.25262265610160395, -0.11565510796620397, -0.2932292753092772, 0.27392841990234773, -0.31272327719814874, 0.6791868582759754, -0.6259885011039997, 0.12492727083874233, -0.4017551798601904, -0.09978981401786423, -0.7211510270951726, -0.29826012858170226, -0.546244846901986, -0.28843857517172267, 0.5257959511394519, 0.10627595008092988, -0.7136393673940271, -0.1779784590917789, -0.8549077172012629, -0.29568108878466653, 0.40252698159563566, 0.34998356875110265, 0.5623440347399893, -0.4896922539646597, -0.2667614854131255, -0.2904546763795601, -0.5000966818898153, 0.017609326624424312, 0.8331627572246835, -0.8566931406341838, 0.5239195039575307, 0.03329744240044398, 0.8231169582488091, 0.34848949854000827, -0.3095232285005586, -0.18210382724913798, 0.46815572755050117, 0.1122642319314201, -0.23006064120863992, -0.011836899876285556, -0.6772948049610555, -0.6316109362514866, -0.19402684609754184, 0.2793081414026216, 0.5295197937397984, 0.003268352865405319, 0.5473386325932234, 0.562738435812155, -0.03070550109562971, 0.33806837556391, 0.5503980591134094, -0.4975369592952644, -0.350938994545103, 0.20797844264543636, -0.4901403027964975, -0.0952946920040085, -0.2888462455397484, -0.18109038337788352, 0.6304035275269971, -0.32435177788897374, -0.21725805157631123, -0.699696444192714, -0.23479073249570828, -4.956251645411441E-4, -0.22640621323834892, 0.7129147274238178, 0.6228292028654474, 0.151072525005402, -0.6430543102488941, -0.24629636859702553, 0.09332852600348543, -0.384314518332656, -0.4965440824798653, -0.7415357827458968, 0.006145807686822132, -0.2464309545911577, 0.054115220138742495, 0.02624570117415516, 0.20432360458901863, 0.2259725625411617, 0.04524025140538803, -0.03652881414270774, -0.47302886100371816, -0.3231835071237325, 0.08165485634541965, 0.5131881764947565, -0.14021908369070962, -0.30525739232927207, -0.36178549609080146, -0.06508199189379912, 0.12636657838165613, -0.6699800711072109, 0.40196415361993926, 0.5112509994396114, 0.5089025443596521, -0.34217138708011446, -0.0036555601048735287, -0.5206169568944562, -0.014884945826568269, 0.4136482479944762, 0.18767594170497753, -0.029069624540351724, -0.6843110648993802, -0.28846251463521033, -0.365910289961984, 0.3662874097368828, 0.13825921137060346, -0.16783391177566076, 0.3481529910365899, -0.1603181820336287, -0.33894547526451385, -0.5621053643773398, -0.1730286599233387, -0.4752289686512734, 0.24964466160574036, 0.10418348925889562, -0.5204913943752187, -0.05302447999028729, 0.5287350752220341, -0.28974123122999285, 0.08120744265942838, -0.038299658063144434, -0.2949259168744006, 0.016787690491731552, -0.23647431509158526, 0.26296357346551946, -0.3033855666038721, 0.1970272316994643, 0.5030879772516667, -0.22494107873387464, -0.13061459112547535, 0.1808077273370409, -0.5028504476919688, -0.3513849985038997, -0.10661986873344531, 0.23325842210492326, -0.5387140283687007, 0.6993353691039631, -0.4641891251888303, 0.003313655864287446, -0.27455844697977483, 0.2962884745722103, 0.09809342454044383, -0.310571408986949, -0.2717796426766618, 0.041775033483852156, 0.030294307223837316, 0.05922322148360274, 0.1651063268571575, -0.18627595963967358, -0.3703925012765447, -0.24002091237353784, -0.10571046217818622, -0.10024602695436083, 0.17312522875677472, 0.0665114145424574, -0.1973079406364588, 0.011767940701108984, 0.07248384164080533, 0.3374842341405634, 0.1910874641428756, -0.15822771999652024, -0.3538131961370415, -0.09632128907006399};

	w1->Set(w1_c);
	w3->Set(w);

	arbi->Randomize();
	w2->Randomize();

	double fitness = 0.0;
	for(int i = 0; i < 2; i++) {
		b2Vec2 gravity;
		gravity.Set(0.0f, 0.0f);
		b2World* world = new b2World(gravity);
		J1_S_Field::Configuration fc;
		fc.MaxStep = 10000;
		fc.World = world;
		fc.TrainingMode = 3;
		J1_M_M3 monitor;

		assa2d::SceneMgr* scenemgr = new J1_S_Field(&fc, arbi, w1, w2, w3);
		scenemgr->Run(&monitor);

		delete scenemgr;
		delete world;

		fitness += monitor.GetFitness();
	}
	fitness /= 2.0f;

	delete arbi;
	delete w1;
	delete w2;
	delete w3;

	return fitness;
}
